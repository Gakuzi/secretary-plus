# Руководство Администратора "Секретарь+"

Этот документ объясняет, как управлять ролями пользователей в приложении "Секретарь+" и какие возможности это дает.

## 1. Как стать Владельцем (Owner)

Роль `owner` — это самая высокая роль в системе, предоставляющая полный доступ ко всем функциям администрирования.

**Важно:** Самый первый пользователь, зарегистрировавшийся в вашем экземпляре приложения через Supabase, автоматически получает роль `owner`.

Если вы не были первым пользователем или хотите назначить эту роль другому аккаунту, следуйте инструкции ниже.

### Назначение роли вручную через Supabase:

1.  **Войдите в панель управления Supabase:**
    *   Перейдите на [supabase.com](https://supabase.com/) и войдите в свой аккаунт.
    *   Откройте ваш проект "Секретарь+".

2.  **Откройте редактор таблиц:**
    *   В меню слева выберите иконку таблицы (**Table Editor**).

3.  **Найдите таблицу `profiles`:**
    *   В списке таблиц слева выберите `profiles`.

4.  **Найдите своего пользователя:**
    *   Просмотрите строки в таблице. Вы можете найти себя по вашему `email` (который виден в таблице `auth.users`, но обычно `id` совпадает) или по `full_name`.

5.  **Измените роль:**
    *   Найдите столбец `role`. По умолчанию у нового пользователя будет стоять значение `user`.
    *   Дважды щелкните на ячейку `user` в вашей строке и измените ее на `owner`.
    *   Нажмите **Save** вверху, чтобы сохранить изменения.

6.  **Перезагрузите приложение:**
    *   Полностью перезагрузите страницу с приложением "Секретарь+" (Ctrl+R или Cmd+R).

После этого у вас появятся права владельца.

## 2. Иерархия ролей

В системе предусмотрена следующая иерархия прав доступа:

-   **Owner (Владелец):**
    -   Имеет все права `admin`.
    -   Может назначать и изменять роли других пользователей, включая других `admins` и `owners`.
    -   Это единственная роль, которая может управлять другими владельцами.

-   **Admin (Администратор):**
    -   Может просматривать **всю историю чатов** всех пользователей.
    -   Может просматривать **общую статистику** использования приложения.
    -   Может просматривать **список всех пользователей** и управлять их ролями (кроме `owner` и других `admin`).

-   **Manager (Менеджер):**
    -   Роль зарезервирована для будущих функций (например, управление командами). В данный момент не имеет специальных прав.

-   **User (Пользователь):**
    -   Стандартная роль. Может видеть и управлять **только своими собственными данными**.

## 3. Возможности в приложении

Когда вы получаете роль `admin` или `owner`, в вашем **Профиле** (доступен по клику на аватар в шапке) появятся дополнительные вкладки:

-   **Статистика:** Просмотр агрегированных данных по использованию функций, активности пользователей и т.д.
-   **Пользователи:** Список всех зарегистрированных пользователей с возможностью изменять их роли (если у вас достаточно прав).
-   **История чата:** Просмотр последних 500 сообщений от всех пользователей для анализа и отладки работы ассистента.

## 4. Важное замечание о безопасности

Назначайте роли `owner` и `admin` с осторожностью. Эти пользователи получают доступ к чувствительным данным других пользователей (истории переписки, списку контактов, файлов и т.д., если они были упомянуты в чате).